<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Use to create grob that is a piece of the pie chart that is always a circle.
Maintain aspect ratio."><title>Pie chart grob. — pieGrob • ggpointpie</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pie chart grob. — pieGrob"><meta property="og:description" content="Use to create grob that is a piece of the pie chart that is always a circle.
Maintain aspect ratio."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggpointpie</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/myuhao/ggpointpie/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Pie chart grob.</h1>
      <small class="dont-index">Source: <a href="https://github.com/myuhao/ggpointpie/blob/HEAD/R/pieGrob.R" class="external-link"><code>R/pieGrob.R</code></a></small>
      <div class="d-none name"><code>pieGrob.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use to create grob that is a piece of the pie chart that is always a circle.
Maintain aspect ratio.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pieGrob</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  y <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  r0 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  r1 <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  theta0 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  theta1 <span class="op">=</span> <span class="va">pi</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">360</span>,</span>
<span>  position_unit <span class="op">=</span> <span class="st">"npc"</span>,</span>
<span>  size_unit <span class="op">=</span> <span class="st">"snpc"</span>,</span>
<span>  gp <span class="op">=</span> <span class="fu">gpar</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  vp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x, y</dt>
<dd><p>The x and y coordinates for this grob, in <code>position_unit</code>.</p></dd>


<dt>r0, r1</dt>
<dd><p>The inner and outer arc radius, in <code>size_unit</code>.</p></dd>


<dt>theta0, theta1</dt>
<dd><p>The start and end angle of the piece of pie, in radius.</p></dd>


<dt>n</dt>
<dd><p>The number of points to sample.</p></dd>


<dt>position_unit</dt>
<dd><p>The grid unit to use for where to put the grob.</p></dd>


<dt>size_unit</dt>
<dd><p>The grid unit to use for the size of the grob.</p></dd>


<dt>gp</dt>
<dd><p>An object from <code><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">grid::gpar()</a></code>.</p></dd>


<dt>vp</dt>
<dd><p>A <code><a href="https://rdrr.io/r/grid/viewport.html" class="external-link">grid::viewport()</a></code> object.</p></dd>


<dt>name</dt>
<dd><p>A character identifier.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code><a href="https://rdrr.io/r/grid/grid.polygon.html" class="external-link">grid::polygonGrob()</a></code> object that represents a piece of the pie chart.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A new grob that is piece of a pie chart. It is worth mention that
<a href="https://ggforce.data-imaginist.com/" class="external-link">ggforce</a> package implement a
<a href="https://github.com/thomasp85/ggforce/blob/main/R/shape.R#123" class="external-link">shape grob</a>.
However, to my understanding, the aspect ratio of that grob will change,
resulting a ellipse like pie chart.</p>
<p><code>gridExtra::ngonGrob()</code> implements a polygon grob that maintain aspect ratio.
It uses the <code><a href="https://rdrr.io/r/grid/grid.polygon.html" class="external-link">grid::polygonGrob()</a></code> internally and does some unit conversion.
Inspired by the gridExtra approach, we separately specify the
<strong>position</strong> (npc-based) and <strong>size</strong> (snpc-based) parameters.
In the end, the grob will be located at the desired location
with its radius proportional to the smaller of the width and height
of the current viewport. Everything is normalized so (0-1) can be used.</p>
<p>If the piece of pie is greater than 2*pi, it will draw a circle instrand.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>gridExtra::ngonGrob()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># A simple slice of the pie chart that is red.</span></span></span>
<span class="r-in"><span><span class="va">pie1</span> <span class="op">=</span> <span class="fu">pieGrob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fl">0.3</span>, y <span class="op">=</span> <span class="fl">0.3</span>,</span></span>
<span class="r-in"><span>  r0 <span class="op">=</span> <span class="fl">0.0</span>, r1 <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  gp <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">pie1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="pieGrob-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># How about a part of a donut?</span></span></span>
<span class="r-in"><span><span class="va">donut</span> <span class="op">=</span> <span class="fu">pieGrob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fl">0.7</span>, y <span class="op">=</span> <span class="fl">0.7</span>,</span></span>
<span class="r-in"><span>  r0 <span class="op">=</span> <span class="fl">0.1</span>, r1 <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  theta0 <span class="op">=</span> <span class="va">pi</span> <span class="op">/</span> <span class="fl">2</span>, theta1 <span class="op">=</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">/</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  gp <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"green"</span>, lty <span class="op">=</span>  <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html" class="external-link">grid.newpage</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">donut</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="pieGrob-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># grob parameters are vectorized</span></span></span>
<span class="r-in"><span><span class="va">many_pieces</span> <span class="op">=</span> <span class="fu">pieGrob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.7</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  r0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span><span class="op">)</span>, r1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  theta0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, theta1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  gp <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"blue"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey20"</span>, <span class="st">"#FFFFFF"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html" class="external-link">grid.newpage</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">many_pieces</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="pieGrob-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If is is a full circle, draw circle...</span></span></span>
<span class="r-in"><span><span class="va">big_pie</span> <span class="op">=</span> <span class="fu">pieGrob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fl">0.5</span>, y <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  r0 <span class="op">=</span> <span class="fl">0.0</span>, r1 <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  theta0 <span class="op">=</span> <span class="fl">0</span>, theta1 <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span>,</span></span>
<span class="r-in"><span>  gp <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html" class="external-link">grid.newpage</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">big_pie</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="pieGrob-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://myuhao.com" class="external-link">Yuhao Min</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

